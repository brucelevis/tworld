--------------------------------------------------------------------------------
-- base
--------------------------------------------------------------------------------
local _PACKAGE = string.gsub(...,"%.","/") or ""

function import(moduleName, currentModuleName)
    local currentModuleNameParts
    local moduleFullName = moduleName
    local offset = 1

    while true do
        if string.byte(moduleName, offset) ~= 46 then -- .
            moduleFullName = string.sub(moduleName, offset)
            if currentModuleNameParts and #currentModuleNameParts > 0 then
                moduleFullName = table.concat(currentModuleNameParts, ".") .. "." .. moduleFullName
            end
            break
        end
        offset = offset + 1

        if not currentModuleNameParts then
            if not currentModuleName then
                local n,v = debug.getlocal(3, 1)
                currentModuleName = v
            end

            currentModuleNameParts = string.split(currentModuleName, ".")
        end
        table.remove(currentModuleNameParts, #currentModuleNameParts)
    end

    return require(moduleFullName)
end


require (_PACKAGE.."/class")
require (_PACKAGE.."/object")
require (_PACKAGE.."/io")
require (_PACKAGE.."/math")
require (_PACKAGE.."/os")
require (_PACKAGE.."/string")
require (_PACKAGE.."/table")
require (_PACKAGE.."/emitter")